(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const s of d.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&f(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function f(r){if(r.ep)return;r.ep=!0;const d=i(r);fetch(r.href,d)}})();/*!
 * zepto.fullpage.js v0.5.0 (https://github.com/yanhaijing/zepto.fullpage)
 * API https://github.com/yanhaijing/zepto.fullpage/blob/master/doc/api.md
 * Copyright 2014 yanhaijing. All Rights Reserved
 * Licensed under MIT (https://github.com/yanhaijing/zepto.fullpage/blob/master/LICENSE)
 */(function(a){var c={page:".page",start:0,duration:500,loop:!1,drag:!1,dir:"v",der:.1,change:function(e){},beforeChange:function(e){},afterChange:function(e){},orientationchange:function(e){}},i=!1;try{var f=Object.defineProperty({},"passive",{get:function(){i=!0}});a.addEventListener("test",null,f)}catch(e){}var r=i?{passive:!1,capture:!1}:!1;function d(e){e.preventDefault()}function s(e,o,t){return e<0?t?o-1:0:e>=o?t?0:o-1:e}function h(e,o,t){var n="0px",l="0px";o==="v"?l=t+"px":n=t+"px",e.style.cssText+=";-webkit-transform : translate3d("+n+", "+l+", 0px);transform : translate3d("+n+", "+l+", 0px);"}function u(e){var o=e||{};for(var t in c)o.hasOwnProperty(t)||(o[t]=c[t]);var n=this;n.curIndex=-1,n.o=o,n.startY=0,n.movingFlag=!1,n.ele.classList.add("fullPage-wp"),n.parentEle=n.ele.parentNode;var l=o.page;l.indexOf(".")==0&&(l=l.substring(1,l.length)),n.pageEles=n.ele.getElementsByClassName(l);for(var g=0;g<n.pageEles.length;g++){var m=n.pageEles[g];m.classList.add("fullPage-page"),m.classList.add("fullPage-dir-"+o.dir)}n.pagesLength=n.pageEles.length,n.update(),n.initEvent(),n.start()}function p(e,o){this.ele=e,u.call(this,o)}p.prototype.update=function(){if(this.o.dir==="h"){this.width=this.parentEle.offsetWidth;for(var e=0;e<this.pageEles.length;e++){var o=this.pageEles[e];o.style.width=this.width+"px"}this.ele.style.width=this.width*this.pagesLength+"px"}this.height=this.parentEle.offsetHeight;for(var e=0;e<this.pageEles.length;e++){var o=this.pageEles[e];o.style.height=this.height+"px"}this.moveTo(this.curIndex<0?this.o.start:this.curIndex)},p.prototype.initEvent=function(){var e=this,o=e.ele;o.addEventListener("touchstart",function(t){if(!e.status)return 1;if(e.movingFlag)return 0;e.startX=t.targetTouches[0].pageX,e.startY=t.targetTouches[0].pageY}),o.addEventListener("touchend",function(t){if(!e.status)return 1;if(e.movingFlag)return 0;var n=e.o.dir==="v"?(t.changedTouches[0].pageY-e.startY)/e.height:(t.changedTouches[0].pageX-e.startX)/e.width,l=n>e.o.der||n<-e.o.der?n>0?-1:1:0;e.moveTo(e.curIndex+l,!0)}),e.o.drag&&o.addEventListener("touchmove",function(t){if(!e.status)return 1;if(e.movingFlag)return e.startX=t.targetTouches[0].pageX,e.startY=t.targetTouches[0].pageY,0;var n=t.changedTouches[0].pageY-e.startY;(e.curIndex==0&&n>0||e.curIndex===e.pagesLength-1&&n<0)&&(n/=2);var l=t.changedTouches[0].pageX-e.startX;(e.curIndex==0&&l>0||e.curIndex===e.pagesLength-1&&l<0)&&(l/=2);var g=e.o.dir==="v"?-e.curIndex*e.height+n:-e.curIndex*e.width+l;o.classList.remove("anim"),h(o,e.o.dir,g)}),a.addEventListener("orientationchange",function(){(a.orientation===180||a.orientation===0)&&e.o.orientationchange("portrait"),(a.orientation===90||a.orientation===-90)&&e.o.orientationchange("landscape")},!1),a.addEventListener("resize",function(){e.update()},!1)},p.prototype.holdTouch=function(){document.addEventListener("touchmove",d,r)},p.prototype.unholdTouch=function(){document.removeEventListener("touchmove",d,r)},p.prototype.start=function(){this.status=1,this.holdTouch()},p.prototype.stop=function(){this.status=0,this.unholdTouch()},p.prototype.getCurIndex=function(){return this.curIndex},p.prototype.moveTo=function(e,o){var t=this,n=t.ele,l=t.curIndex;if(e=s(e,t.pagesLength,t.o.loop),o?n.classList.add("anim"):n.classList.remove("anim"),e!==l){var g=t.o.beforeChange({next:e,cur:l});if(g===!1)return 1}t.movingFlag=!0,t.curIndex=e,h(n,t.o.dir,-e*(t.o.dir==="v"?t.height:t.width)),e!==l&&t.o.change({prev:l,cur:e}),a.setTimeout(function(){if(t.movingFlag=!1,e!==l){t.o.afterChange({prev:l,cur:e});for(var m=0;m<t.pageEles.length;m++){var y=t.pageEles[m];m===e?y.classList.add("cur"):y.classList.remove("cur")}}},t.o.duration)},p.prototype.movePrev=function(e){this.moveTo(this.curIndex-1,e)},p.prototype.moveNext=function(e){this.moveTo(this.curIndex+1,e)},Element.prototype.fullpage=function(e){return new p(this,e)}})(window);if(isMobile!==!1)var L=setInterval(()=>{console.log(loadSum),loadSum>=8&&T()},300);var v=[],x=!1;function T(){clearInterval(L);var a=[].forEach;setTimeout(()=>{document.getElementById("loading-mask").style.display="none"},100),document.getElementsByClassName("wp-inner")[0].fullpage({change:function(c){P(),a.call(document.querySelectorAll(".page")[c.cur].querySelectorAll(".js-animate"),function(i){i.classList.add("hide"),i.classList.remove(i.dataset.animate),i.dataset.sec&&i.classList.remove(i.dataset.sec)})},afterChange:function(c){c.cur===5&&!x&&I(),v=document.querySelectorAll(".page")[c.cur].querySelectorAll(".js-animate"),a.call(v,i=>{var f=i.dataset.time;i.timer=setTimeout(function(){if(i.classList.add(i.dataset.animate),i.classList.remove("hide"),i.dataset.sec){var r=i.dataset.sectime||0;i.sectimer=setTimeout(function(){i.classList.remove(i.dataset.animate),i.classList.add(i.dataset.sec)},r)}},f)})}})}function P(){v.forEach((a,c,i)=>{a.timer&&clearTimeout(a.timer),a.sectimer&&clearTimeout(a.sectimer),i&&i.splice&&i.splice(c,1)})}function I(){if(window.BMap){let r=function(d,s,h){this._point=d,this._text=s,this._overText=h};var f=r;x=!0;var a=[113.099109,27.831009],c=new BMap.Map("map",{minZoom:10,maxZoom:14});c.centerAndZoom(new BMap.Point(a[0],a[1]),13),r.prototype=new BMap.Overlay,r.prototype.initialize=function(d){this._map=d;var s=this._div=document.createElement("div");s.style.position="absolute",s.style.zIndex=BMap.Overlay.getZIndex(this._point.lat),s.style.backgroundColor="#E60000",s.style.borderRadius="3px",s.style.color="white",s.style.height="18px",s.style.padding="2px 4px",s.style.lineHeight="18px",s.style.whiteSpace="nowrap",s.style.MozUserSelect="none",s.style.fontSize="12px";var h=this._span=document.createElement("span");s.appendChild(h),h.appendChild(document.createTextNode(this._text));var u=this._arrow=document.createElement("div");return u.style.position="absolute",u.style.width="0",u.style.height="0",u.style.top="22px",u.style.left="10px",u.style.overflow="hidden",u.style.border="6px solid transparent",u.style.borderTop="6px solid #E60000",s.appendChild(u),d.getPanes().labelPane.appendChild(s),s},r.prototype.draw=function(){var d=this._map,s=d.pointToOverlayPixel(this._point);this._div.style.left=s.x-parseInt(this._arrow.style.left)+"px",this._div.style.top=s.y-30+"px"};var i=new r(new BMap.Point(a[0],a[1]),"婚礼","N and Y");c.addOverlay(i),document.querySelector("#location-btn").addEventListener("click",()=>{c.panTo(new BMap.Point(a[0],a[1]))})}}document.addEventListener("DOMContentLoaded",a=>{E()});window.onload=function(){E()};function E(){let a=document.querySelector("#mp3"),c=document.querySelector("#play-btn"),i;a.load(),document.addEventListener("WeixinJSBridgeReady",function(){a.play(),a.paused||(this.style.animationPlayState="running",a.play(),i=!0)},!1),console.log(a.paused,a.readyState),i=!a.paused&&a.readyState===4,i?c.style.animationPlayState="running":c.style.animationPlayState="paused",c.addEventListener("click",function(f){i?(this.style.animationPlayState="paused",a.pause(),i=!1):a.readyState===4&&(this.style.animationPlayState="running",a.play(),i=!0)})}
